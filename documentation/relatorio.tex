\documentclass[conference]{IEEEtran}

\ifCLASSINFOpdf
  \usepackage[pdftex]{graphicx}
  % declare the path(s) where your graphic files are
  % \graphicspath{{../pdf/}{../jpeg/}}
  % and their extensions so you won't have to specify these with
  % every instance of \includegraphics
  % \DeclareGraphicsExtensions{.pdf,.jpeg,.png}
\else
  % or other class option (dvipsone, dvipdf, if not using dvips). graphicx
  % will default to the driver specified in the system graphics.cfg if no
  % driver is specified.
  \usepackage[dvips]{graphicx}
  % declare the path(s) where your graphic files are
  % \graphicspath{{../eps/}}
  % and their extensions so you won't have to specify these with
  % every instance of \includegraphics
  % \DeclareGraphicsExtensions{.eps}
\fi


% *** MATH PACKAGES ***
%
\usepackage[cmex10]{amsmath}
\usepackage[brazil]{babel}
\usepackage[T1]{fontenc}
\usepackage[utf8]{inputenc}


%\usepackage[caption=false]{caption}
%\usepackage[font=footnotesize]{subfig}

\usepackage{url}

% correct bad hyphenation here
\hyphenation{op-tical net-works semi-conduc-tor}

\input{reportsparsed}

\begin{document}
\title{MAC0463/5743 - Computação Móvel \\ Exercício Programa 3 - The One}


% author names and affiliations
% use a multiple column layout for up to three different
% affiliations
\author{\IEEEauthorblockN{Diogo Haruki Kykuta}
\IEEEauthorblockA{nUSP: 6879613\\
Instituto de Matemática e Estatística\\
Universidade de São Paulo\\
Email: haruki@linux.ime.usp.br}
\and
\IEEEauthorblockN{Fernando Omar Aluani}
\IEEEauthorblockA{nUSP: 6797226\\
Instituto de Matemática e Estatística\\
Universidade de São Paulo\\
Email: rewasvat@linux.ime.usp.br}}

% conference papers do not typically use \thanks and this command
% is locked out in conference mode. If really needed, such as for
% the acknowledgment of grants, issue a \IEEEoverridecommandlockouts
% after \documentclass

\maketitle

\begin{abstract}
    Neste trabalho, apresentamos alguns resultados de simulações usando
    o \emph{The One} e motivações, assim como uma análise superficial dos
    resultados obtidos.
\end{abstract}

\IEEEpeerreviewmaketitle


\section{Introdução}
O \emph{The One} é um simulador de DTNs. Neste trabalho, apresentaremos resultados de simulações em quatro cenários diferentes, com padrão de movimentação e interfaces de comunicação fixadas para cada cenário e variando o protocolo de roteamento.

\subsection{Motivação}
\label{sec:intro:motivacao}
Escolhemos inicialmente 4 cenários que nos parecessem interessantes. Para cada cenário, escolhemos alguns protocolos de roteamento que gostaríamos de testar seu desempenho. Juntando todos os protocolos escolhidos tivemos uma lista de seis protocolos de roteamento, e rodamos simulações dos cenários para cada protocolo na lista. Listamos a seguir os cenários, os protocolos escolhidos e uma breve explicação de suas escolhas.

\subsubsection{CentroSP}
Julgamos esse cenário interessante por ser o único de nossos cenários que fazia sentido simular para um tempo grande (24 horas). Afinal, São Paulo não para.
\begin{itemize}
\item \texttt{DirectDeliveryRouter}: Pela curiosidade de ver o funcionamento desse protocolo num ambiente com muitas pessoas se movimentando.
\item \texttt{EpidemicRouter}: Queríamos ver o funcionamento de um protocolo epidêmico nesse ambiente onde há uma grande
movimentação de pessoas.
\end{itemize}

\subsubsection{USP}
Não poderíamos deixar de incluir nossa segunda casa nos cenários. Este é o cenário \textquotedblleft USP2\textquotedblright{} disponibilizado.
\begin{itemize}
\item \texttt{SprayAndWaitRouter} e \texttt{ProphetRouter}: Escolhas aleatórias de protocolos amplamente usados baseados em artigos entre as possibilidades presentes no \emph{The One}.
\item \texttt{EpidemicRouter}: Queríamos ver o funcionamento de um protocolo epidêmico nesse ambiente onde há uma grande
movimentação de pessoas.
\end{itemize}

\subsubsection{Estacionamento}
Nos interessamos pelas muitas vagas imóveis e gostaríamos de ver como as transmissões eram feitas nesse caso e poder comparar com os demais cenários desse trabalho, que possuem nós se movimentando intensamente.
\begin{itemize}
\item \texttt{FirstContactRouter}: parecia fazer sentido transmitir para o primeiro que eu encostar num estacionamento com vagas imóveis.
\end{itemize}

\subsubsection{ParqueIbirapuera}
O cenário do Parque do Ibirapuera parece bem completo, tendo 6 grupos com características bem interessantes. Tanto que, para ser viável, não pudemos usar um tempo de simulação maior, mas apenas de 1 hora, pois este cenário era bem complexo e sua execução, bem mais demorada.
\begin{itemize}
\item \texttt{ProphetRouter} e \texttt{MaxPropRouter}: Escolhas aleatórias de protocolos amplamente usados baseados em artigos entre as possibilidades presentes no \emph{The One}.
\end{itemize}

\subsection{Fundamentação}
Segue uma explicação sobre os protocolos de roteamento usados:

\subsubsection{DirectDeliveryRouter}
É um protocolo ingênuo que só transmite uma mensagem a um nó se o nó for o destino da mensagem. Dessa forma, as mensagens fazem um único \textit{hop} (salto) para chegar onde devem chegar, mas levam mais tempo para sair do nó de origem pois devem esperar o nó de origem e o de destino estarem em alcance para conseguir se comunicar.

\subsubsection{EpidemicRouter}
É um protocolo ingênuo baseado na \textquotedblleft enchente\textquotedblright{} de mensagens na rede. Um nó continuamente copia e transmite uma mensagem para contatos que ainda não possuam uma cópia dessa mensagem.
Dessa forma é meio garantido que as mensagens cheguem onde devem chegar, mas isso consome muitos recursos e pode causar
muito congestionamento na rede.

\subsubsection{FirstContactRouter}
É um protocolo ingênuo de roteamento que transmite uma mensagem para o primeiro nó que ele encontra. De modo informal, podemos dizer que ele seria equivalente à brincadeira infantil \textquotedblleft batata-quente\textquotedblright{}. Isso confere algumas propriedades estranhas para o protocolo, pois o funcionamento dele é altamente dependente do protocolo de comunicação e dos padrões de movimento dos nós.

\subsubsection{MaxPropRouter}
Foi baseado no artigo \textit{MaxProp: Routing for Vehicle-Based Disruption-Tolerant Networks} \cite{MaxPropRouter:original}.
 
Esse protocolo é baseado em replicação: quando um nó é descoberto, todas mensagens que aquele nó não
tem serão possivelmente copiadas e transferidas. A diferença do \emph{MaxProp} está em como ele determina quais
menssagens deverão ser transmitidas antes e quais deverão ser canceladas antes.

Para tal, ele mantém uma fila ordenada baseada na destinação de cada mensagem, ordenado pela probabilidade
estimada de um caminho transitivo futuro para aquele destino. Para obter probabilidades de caminho estimado,
cada nó mantém um vetor de tamanho $N-1$ (onde $N$ é o número de nós na rede) consistindo da probabilidade
do nó encontrar cada outro nó na rede. Esse vetor é inicializado com uma probabilidade igual para cada nó,
e ao encontrar outro nó, a probabilidade daquele nó aumenta em 1 e o vetor é normalizado para a somatória
das probabilidades equivaler a 1.

Quando nós se encontram, eles transmitem seus vetores para o outro nó, e é usando o seu vetor e o vetor
conhecido de outros nós que um nó calcula o provável caminho mais curto para o destino, e baseado nisso
também é calculado o custo do caminho que é usado para determinar a ordem em que as mensagens são transmitidas
e canceladas.

Fora essa funcionalidade padrão descrita acima, o \emph{MaxProp} permite diversas modificações e adições de modo a melhorar sua eficiência. O \emph{MaxProp} implementado pelo \emph{The One} utiliza uma extensão \cite{MaxPropRouter:adicao} que altera como o vetor de probabilidade de um nó encontrar os outros é atualizado ao começar uma nova conexão. Essa atualização é baseada num parâmetro $\alpha$, com o valor padrão $\alpha=1$ (dessa forma, ele se comporta como o algoritmo original).
 
\subsubsection{ProphetRouter}
Foi baseado no artigo \textit{Probabilistic Routing in Intermittently Connected Networks} \cite{ProphetRouter:original}.
 
Esse protocolo tenta explorar a não-aleatoridade de encontros no mundo real mantendo um conjunto de probabilidade de entregar com sucesso uma mensagem para cada destino na DTN. Ele usa um algoritmo adaptativo para determinar a probabilidade de um nó conseguir entregar uma mensagem, e altera as probabilidades a cada encontro de acordo com algumas regras:
\begin{itemize}
  \item Se a probabilidade para um destino não é conhecida, é assumida como zero;
  \item Quando um nó A encontra outro nó B, a probabilidade de B é aumentada;
  \item Quando um nó A encontra outro nó B, a probabilidade de todos destinos diferentes de B são \textquotedblleft envelhecidas\textquotedblright ;
  \item Quando um nó A encontra outro nó B, eles trocam probabilidades, usando a propriedade transitiva das probabilidades para atualizar os valores de destinos D para qual B tem um valor na suposição que A provavelmente vai encontrar B de novo;
\end{itemize}

O protocolo então só copia uma mensagem e transmite para outro nó se aquele nó tiver uma probabilidade maior de entregar a mensagem.

\subsubsection{SprayAndWaitRouter}
Foi baseado no artigo \textit{Spray and Wait: An Efficient Routing Scheme for Intermittently Connected Mobile Networks} \cite{SprayAndWaitRouter:original}.

Esse protocolo tenta misturar os benefícios de protocolos de roteamento baseados em replicação de mensagem com protocolos baseados em encaminhamento. Ele é composto por duas fases:
\begin{itemize}
  \item Fase de \textit{Spray}: responsabilidade do nó de origem, essa é a fase inicial e consiste em fazer N cópias da mensagem e transmitir cada cópia para um nó diferente.
  \item Fase de \textit{Wait} (Espera): é como fica o nó de origem depois de terminar a Fase de \textit{Spray}, ou os nós ao receberem uma mensagem. Eles simplesmente esperam encontrar o destino da mensagem para entregá-la diretamente.
\end{itemize}

Existem dois métodos de protocolo: o padrão e o binário. A única diferença entre eles é como as N cópias da mensagem são distribuídas durante a Fase de \textit{Spray}. Pelo que vimos, a implementação desse protocolo no \emph{The One} aceita ambos métdos, mas nós só usamos o padrão.

\section{Metodologia dos testes}
Escolhemos primeiro quatro cenários e listamos protocolos de roteamento que achamos interessantes, como explicado em \ref{sec:intro:motivacao}. Decidimos, então, simular cada cenário para cada todos os protocolos que apareceram em qualquer das listas. Assim, testamos cada cenário para os seguintes protocolos: \texttt{DirectDeliveryRouter}, \texttt{EpidemicRouter}, \texttt{FirstContactRouter}, \texttt{MaxPropRouter}, \texttt{ProphetRouter} e \texttt{SprayAndWaitRouter}.


\section{Resultados obtidos}
Nesta seção abordaremos os resultados obtidos, fazendo uma análise geral do significado de tais resultados. Nas tabelas \ref{table:usp}, \ref{table:centrosp}, \ref{table:estacionamento}, \ref{table:parqueibirapuera} apresentamos de forma exaustiva os protocolos em que encontram-se os valores mínimos e máximos para cada valor existente em um \textit{report} do tipo \texttt{MessageStatsReport} para os cenários USP, CentroSP, Estacionamento e Parque do Ibirapuera, respectivamente. Vamos agora fazer uma pequena interpretação dos dados conseguidos a partir dos \textit{reports}.

\subsection{CentroSP}
Neste cenário não fomos capazes de simular para o protocolo \emph{MaxProp} nos parâmetros desejados. Este protocolo tem uma complexidade um pouco superior e sua simulação é muito mais lenta. Para este cenário, queríamos testar intervalos de 24 horas, mas esse protocolo apresentou taxa de simulação inferior a 1 segundo virtual por segundo real. Ou seja, levaria mais de 1 dia de simulação, então deixamos de lado.

\begin{table}[!t]
\caption{Tabela Síntese de Resultados do cenário USP}
\label{table:usp}
\centering
\begin{tabular}{|c|c c|}
  \hline
  Nome do Protocolo & Mínimo & Máximo \\
  \hline
  latency\_avg & 88.2166 (MaxProp) & 3702.5553 (FirstContact) \\
  delivered & 893.0 (Epidemic) & 1410.0 (Prophet) \\
  hopcount\_avg & 1.0 (DirectDelivery) & 119.7245 (FirstContact) \\
  rtt\_med & NaN & NaN \\
  relayed & 1201.0 (DirectDelivery) & 6130771.0 (Epidemic) \\
  started & 1202.0 (DirectDelivery) & 6139802.0 (Epidemic) \\
  buffertime\_avg & 38.6591 (FirstContact) & 17997.5675 (DirectDelivery) \\
  created & 1440.0 (DirectDelivery) & 1440.0 (DirectDelivery) \\
  aborted & 1.0 (DirectDelivery) & 8953.0 (Epidemic) \\
  buffertime\_med & 2.0 (FirstContact) & 18000.0 (DirectDelivery) \\
  sim\_time & 86400.0 (DirectDelivery) & 86400.0 (DirectDelivery) \\
  response\_prob & 0.0 (DirectDelivery) & 0.0 (DirectDelivery) \\
  dropped & 145.0 (FirstContact) & 6112674.0 (Epidemic) \\
  overhead\_ratio & 0.0 (DirectDelivery) & 6864.3651 (Epidemic) \\
  delivery\_prob & 0.6201 (Epidemic) & 0.9792 (Prophet) \\
  removed & 0.0 (DirectDelivery) & 196519.0 (FirstContact) \\
  rtt\_avg & NaN & NaN \\
  hopcount\_med & 1.0 (DirectDelivery) & 123.0 (FirstContact) \\
  latency\_med & 46.0 (MaxProp) & 1590.0 (DirectDelivery) \\
  \hline
\end{tabular}
\end{table}

\begin{table}[!t]
\caption{Tabela Síntese de Resultados do cenário CentroSP}
\label{table:centrosp}
\centering
\begin{tabular}{|c|c c|}
  \hline
  Nome do Protocolo & Mínimo & Máximo \\
  \hline
  latency\_avg & 88.2166 (MaxProp) & 3702.5553 (FirstContact) \\
  delivered & 893.0 (Epidemic) & 1410.0 (Prophet) \\
  hopcount\_avg & 1.0 (DirectDelivery) & 119.7245 (FirstContact) \\
  rtt\_med & NaN & NaN \\
  relayed & 1201.0 (DirectDelivery) & 6130771.0 (Epidemic) \\
  started & 1202.0 (DirectDelivery) & 6139802.0 (Epidemic) \\
  buffertime\_avg & 38.6591 (FirstContact) & 17997.5675 (DirectDelivery) \\
  created & 1440.0 (DirectDelivery) & 1440.0 (DirectDelivery) \\
  aborted & 1.0 (DirectDelivery) & 8953.0 (Epidemic) \\
  buffertime\_med & 2.0 (FirstContact) & 18000.0 (DirectDelivery) \\
  sim\_time & 86400.0 (DirectDelivery) & 86400.0 (DirectDelivery) \\
  response\_prob & 0.0 (DirectDelivery) & 0.0 (DirectDelivery) \\
  dropped & 145.0 (FirstContact) & 6112674.0 (Epidemic) \\
  overhead\_ratio & 0.0 (DirectDelivery) & 6864.3651 (Epidemic) \\
  delivery\_prob & 0.6201 (Epidemic) & 0.9792 (Prophet) \\
  removed & 0.0 (DirectDelivery) & 196519.0 (FirstContact) \\
  rtt\_avg & NaN & NaN \\
  hopcount\_med & 1.0 (DirectDelivery) & 123.0 (FirstContact) \\
  latency\_med & 46.0 (MaxProp) & 1590.0 (DirectDelivery) \\
  \hline
\end{tabular}
\end{table}

\section{Conclusões}
Lorem ipsum dolor sit amet, consectetur adipiscing elit. Cras vitae nulla adipiscing, gravida quam et, ullamcorper nibh. Nunc pretium mattis dolor, ac lacinia lectus sodales vel. Nunc sagittis leo pretium neque mollis aliquam. Nam molestie nisi diam, vel consequat libero sodales sit amet. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec turpis dui, tristique fringilla ultrices eget, elementum sed dui. Etiam vel metus vitae arcu congue vulputate id auctor nibh. Aliquam odio massa, varius at sapien id, varius porttitor quam. Vestibulum ut dictum dolor.

Nullam ultricies molestie ipsum, facilisis tincidunt sapien blandit rhoncus. Cras iaculis sem nunc, at placerat dui volutpat non. Curabitur at dui congue, molestie tortor sed, rutrum nisi. Sed vestibulum urna non blandit ultrices. Donec tempor tempor tempus. Etiam blandit nulla nec nibh porta, eu imperdiet felis euismod. Proin vitae felis nibh. Quisque ac interdum mauris. Maecenas id enim sit amet erat malesuada elementum eget a risus. Fusce aliquet lorem non purus pellentesque, sit amet lobortis justo consequat.

Etiam in nisl aliquet, scelerisque tellus nec, ullamcorper nisl. Nam dictum vitae leo sed scelerisque. Integer bibendum iaculis nunc, non rhoncus felis ultrices quis. Nam semper, lorem id luctus mattis, elit diam volutpat elit, quis convallis metus nibh non libero. Pellentesque dui dui, posuere eu lorem id, luctus fringilla metus. Sed pharetra nibh at dui bibendum ornare. Nulla neque libero, auctor vitae diam et, fermentum bibendum ipsum.

Nullam risus arcu, scelerisque a sem ac, tincidunt molestie sem. Pellentesque et interdum nisi. In bibendum fringilla eros, ac dapibus orci venenatis nec. Integer vulputate mauris ac enim euismod, vitae scelerisque nibh tempus. Cras nec dolor orci. Suspendisse sed arcu non urna convallis iaculis. Pellentesque dignissim eros sit amet nisi mattis, sit amet lobortis mauris ullamcorper. Morbi quis elementum nulla. Maecenas vitae dui eu est volutpat eleifend.

In sed ligula est. Vivamus justo velit, hendrerit eu lobortis in, convallis a enim. Nam tempus eleifend leo in gravida. Nullam scelerisque, magna vitae tristique lacinia, turpis lectus rhoncus risus, ut blandit enim quam et neque. Mauris mauris arcu, facilisis in condimentum pharetra, faucibus eu ipsum. Aenean pulvinar ornare nulla. Pellentesque et est iaculis, interdum velit sed, consectetur nisl. Fusce eget nibh vel dui faucibus cursus. Duis orci urna, aliquet a dui nec, aliquam elementum diam. Curabitur pulvinar quam vitae eros porttitor, a posuere ligula posuere. Integer at fermentum urna. Vivamus tempus erat at ligula posuere cursus eget sit amet neque. Nulla accumsan lorem luctus tempus vulputate. Quisque interdum sapien urna, nec sollicitudin ligula mattis non. Praesent turpis nunc, porta at sollicitudin at, consequat ac odio. Fusce commodo felis lacus, in tristique neque dictum a.

% For figures, \caption should occur after the \includegraphics.
% Note that IEEEtran v1.7 and later has special internal code that
% is designed to preserve the operation of \label within \caption
% even when the captionsoff option is in effect. However, because
% of issues like this, it may be the safest practice to put all your
% \label just after \caption rather than within \caption{}.
%
% Reminder: the "draftcls" or "draftclsnofoot", not "draft", class
% option should be used if it is desired that the figures are to be
% displayed while in draft mode.
%
%\begin{figure}[!t]
%\centering
%\includegraphics[width=2.5in]{myfigure}
% where an .eps filename suffix will be assumed under latex, 
% and a .pdf suffix will be assumed for pdflatex; or what has been declared
% via \DeclareGraphicsExtensions.
%\caption{Simulation Results}
%\label{fig_sim}
%\end{figure}

% Note that IEEE typically puts floats only at the top, even when this
% results in a large percentage of a column being occupied by floats.


% An example of a double column floating figure using two subfigures.
% (The subfig.sty package must be loaded for this to work.)
% The subfigure \label commands are set within each subfloat command, the
% \label for the overall figure must come after \caption.
% \hfil must be used as a separator to get equal spacing.
% The subfigure.sty package works much the same way, except \subfigure is
% used instead of \subfloat.
%
%\begin{figure*}[!t]
%\centerline{\subfloat[Case I]\includegraphics[width=2.5in]{subfigcase1}%
%\label{fig_first_case}}
%\hfil
%\subfloat[Case II]{\includegraphics[width=2.5in]{subfigcase2}%
%\label{fig_second_case}}}
%\caption{Simulation results}
%\label{fig_sim}
%\end{figure*}
%
% Note that often IEEE papers with subfigures do not employ subfigure
% captions (using the optional argument to \subfloat), but instead will
% reference/describe all of them (a), (b), etc., within the main caption.


% An example of a floating table. Note that, for IEEE style tables, the 
% \caption command should come BEFORE the table. Table text will default to
% \footnotesize as IEEE normally uses this smaller font for tables.
% The \label must come after \caption as always.
%
%\begin{table}[!t]
%% increase table row spacing, adjust to taste
%\renewcommand{\arraystretch}{1.3}
% if using array.sty, it might be a good idea to tweak the value of
% \extrarowheight as needed to properly center the text within the cells
%\caption{An Example of a Table}
%\label{table_example}
%\centering
%% Some packages, such as MDW tools, offer better commands for making tables
%% than the plain LaTeX2e tabular which is used here.
%\begin{tabular}{|c||c|}
%\hline
%One & Two\\
%\hline
%Three & Four\\
%\hline
%\end{tabular}
%\end{table}


% Note that IEEE does not put floats in the very first column - or typically
% anywhere on the first page for that matter. Also, in-text middle ("here")
% positioning is not used. Most IEEE journals/conferences use top floats
% exclusively. Note that, LaTeX2e, unlike IEEE journals/conferences, places
% footnotes above bottom floats. This can be corrected via the \fnbelowfloat
% command of the stfloats package.





% conference papers do not normally have an appendix


% use section* for acknowledgement
\section*{Acknowledgment}


The authors would like to thank...





% trigger a \newpage just before the given reference
% number - used to balance the columns on the last page
% adjust value as needed - may need to be readjusted if
% the document is modified later
%\IEEEtriggeratref{8}
% The "triggered" command can be changed if desired:
%\IEEEtriggercmd{\enlargethispage{-5in}}

% references section

% can use a bibliography generated by BibTeX as a .bbl file
% BibTeX documentation can be easily obtained at:
% http://www.ctan.org/tex-archive/biblio/bibtex/contrib/doc/
% The IEEEtran BibTeX style support page is at:
% http://www.michaelshell.org/tex/ieeetran/bibtex/
\bibliographystyle{IEEEtran}
% argument is your BibTeX string definitions and bibliography database(s)
\bibliography{IEEEabrv,bibliografia}
%
% <OR> manually copy in the resultant .bbl file
% set second argument of \begin to the number of references
% (used to reserve space for the reference number labels box)
% \begin{thebibliography}{1}

% \bibitem{IEEEhowto:kopka}
% H.~Kopka and P.~W. Daly, \emph{A Guide to \LaTeX}, 3rd~ed.\hskip 1em plus
%   0.5em minus 0.4em\relax Harlow, England: Addison-Wesley, 1999.

% \bibitem{ProphetRouter:original}
% \end{thebibliography}




% that's all folks
\end{document}


